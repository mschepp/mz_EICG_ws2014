\documentclass{scrartcl}

\input{./packages}
\input{./definitions}
\newcommand{\exercise}[2]{\vspace{1em}\noindent{\bf Exercise #1 (#2)}}
\renewcommand{\proof}{\vspace{0.8em}\noindent{\bf Proof: }}

\begin{document}
\noindent{\footnotesize Computer Graphics 2014/15, Exercise 2} 
\hfill 
{\footnotesize \input{./currentDate.txt}}
\newline
{\footnotesize \input{../../NAMES.txt}}

\noindent\hrulefill

\exercise{2.2}{Rescaling around a fixed point}
Let $c\in\Real^2$ be a center, $z\in(0,\infty)$ a zoom factor and
$dz\in(0,\infty)$ a zoom scale factor.
All the points are transformed from world coordinates to screen coordinates
before rendering in the following way:
\[
  v^\prime = z(v - c).
\]
Now we assume that we have a screen point $p^\prime$ with world coordinates
$p$ and want to keep it fixed when changing the zoom factor from $z$ to
$dz\cdot z$.
That means, we have two equations:
\begin{align*}
   p^\prime &= z (p - c) \\
   p^\prime &= (dz \cdot z) (p - c^\prime),
\end{align*}
where $c^\prime$ is the new center. Resolving for $c^\prime$ gives us:
\[
  c^\prime = p - (p-c)/dz.
\]
In code, this looks as follows
\footnote{
  Unfortunately, it works only if one \emph{drags} the mouse,
  there is no reaction if the mouse \emph{moves}. It's not clear whether
  it has something to do with exotic window managers or something else.
  However, it's just an annoying QT problem, it has nothing to do with 
  geometry or graphics.
}:
\lstinputlisting[firstline=318,lastline=329]{../code/Lizard.cpp}
\end{document}
